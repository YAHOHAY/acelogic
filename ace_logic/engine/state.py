# 1. å®šä¹‰çŠ¶æ€ (State)
from typing import List, TypedDict, Dict


class TableState(TypedDict):
    # ==========================================
    # ä¸€ã€ å…¨å±€å…¬å…±çŠ¶æ€ (Global Table Info)
    # ==========================================
    stage: str  # å½“å‰å‘ç‰Œé˜¶æ®µ ("Pre-Flop", "Flop", "Turn", "River") - æ¯”æ•°å­— turn æ›´æ¸…æ™°
    pot: int  # æ€»åº•æ± é‡‘é¢
    community_cards: List[str]  # å…¬å…±ç‰Œï¼Œä¾‹å¦‚: ["Qs", "Js", "Ts"]
    current_max_bet: int  # ã€æ–°å¢ã€‘å½“å‰è¿™ä¸€è½®çš„æœ€é«˜ä¸‹æ³¨é¢ã€‚ç”¨æ¥è®¡ç®—ç©å®¶è¿˜éœ€è¦è¡¥å¤šå°‘é’±
    action_history: List[str]  # æ¡Œé¢å†å²åŠ¨ä½œï¼Œä¾›å¤§æ¨¡å‹é˜…è¯»ä¸Šä¸‹æ–‡
    # ğŸŒŸ ã€æ–°å¢ã€‘ç›²æ³¨ä¸åº•æ³¨ç»“æ„ï¼è®© AI çŸ¥é“ç›®å‰çš„é€šè´§è†¨èƒ€æ°´å¹³
    sb_amount: int  # å°ç›²æ³¨é‡‘é¢ (å¦‚: 10)
    bb_amount: int  # å¤§ç›²æ³¨é‡‘é¢ (å¦‚: 20)
    ante: int  # åº•æ³¨é‡‘é¢ (å¦‚: 0 æˆ– 5)

    # ==========================================
    # äºŒã€ ç©å®¶å…¬å…±ç”»åƒ (Public Roster Info)
    # ==========================================
    players: List[str]  # ç©å®¶åå•
    current_player_idx: int  # å½“å‰è¯¥è°è¯´è¯äº† (æ¸¸æ ‡)

    player_positions: Dict[str, str]  # ã€æ–°å¢ã€‘æå…¶é‡è¦ï¼ä½ç½®æ˜ å°„ï¼Œä¾‹å¦‚: {"Alice": "SB", "Bob": "BB", "Charlie": "BTN"}
    player_stacks: Dict[str, int]  # ã€æ–°å¢ã€‘ç©å®¶å½“å‰å‰©ä½™ç­¹ç é‡ï¼ä¾‹å¦‚: {"Alice": 1000, "Bob": 500}
    player_status: Dict[str, str]  # ã€æ–°å¢ã€‘ç©å®¶å­˜æ´»çŠ¶æ€ï¼("active"-æ´»è·ƒ, "folded"-å·²å¼ƒç‰Œ, "all_in"-å·²å…¨ä¸‹)
    player_current_bets: Dict[str, int]  # ã€æ–°å¢ã€‘æœ¬è½®ç©å®¶å·²ç»ä¸‹æ³¨çš„é‡‘é¢ã€‚(ç”¨æ¥ç®—çœŸå®è·Ÿæ³¨é¢)
    player_acted: Dict[str, bool]  # è®°å½•æœ¬è½®ä¸‹æ³¨åœˆä¸­ï¼Œæ¯ä¸ªç©å®¶æ˜¯å¦å·²ç»é‡‡å–è¿‡è¡ŒåŠ¨
    player_total_invested: Dict[str, int]  # ã€æ–°å¢ã€‘ç©å®¶æ€»å…±å·²ç»ä¸‹æ³¨çš„é‡‘é¢ã€‚(ç»“ç®—æ—¶å€™è¦ç”¨åˆ°)

    # ==========================================
    # ä¸‰ã€ AI ç§æœ‰æ•°æ® (Private / Hidden Info)
    # = æ³¨æ„ï¼šä»¥ä¸‹æ•°æ®æ˜¯ AceLogic åå°ç®—å‡ºæ¥ï¼Œç²¾å‡†å–‚ç»™å¯¹åº” AI çš„
    # ==========================================
    hole_cards: Dict[str, List[str]]  # ã€ä¿®æ”¹ã€‘ä»å•åˆ—è¡¨å˜æˆå­—å…¸ï¼{"Alice": ["As", "Kd"], "Bob": ["2c", "7o"]}
    win_rates: Dict[str, float]  # ã€ä¿®æ”¹ã€‘æ¯ä¸ªç©å®¶æ­¤æ—¶çš„çœŸå®èƒœç‡ï¼{"Alice": 0.65, "Bob": 0.12}
    personas: Dict[str, str]  # æ¯ä¸ªç©å®¶çš„æ€§æ ¼è®¾å®š