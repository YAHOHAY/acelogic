
services:
  # --- ä½ çš„ Python æ ¸å¿ƒ API æœåŠ¡ ---
  api:
    build: .  # å‘Šè¯‰ docker å»å½“å‰ç›®å½•æ‰¾ Dockerfile è¿›è¡Œæ„å»º
    container_name: acelogic_api
    ports:
      - "8000:8000" # æŠŠå®¹å™¨çš„ 8000 æ˜ å°„åˆ°ä½ ç”µè„‘çš„ 8000
    depends_on:
      - db  # é‡ç‚¹ï¼šå‘Šè¯‰ Dockerï¼ŒAPI å¿…é¡»ç­‰ DB å¯åŠ¨åå†å¯åŠ¨
    environment:
      # è¿™é‡Œå°±æ˜¯ä¼ ç»™ Python çš„ç¯å¢ƒå˜é‡ï¼
      # æ³¨æ„è¿™é‡Œçš„ URL å˜æˆäº† @db:5432ï¼ŒDocker çš„å†…éƒ¨ DNS ä¼šè‡ªåŠ¨æŠŠå®ƒè§£æåˆ°ä¸‹é¢çš„ db å®¹å™¨
      - DATABASE_URL=postgresql+asyncpg://postgres:password@db:5432/acelogic_db
        # ğŸ‘‡ åŠ ä¸Šè¿™ä¸¤è¡Œâ€œé­”æ³•ä»£ç â€ ğŸ‘‡
    volumes:
      - .:/app  # æŠŠå½“å‰ç›®å½•(.) æ˜ å°„åˆ°å®¹å™¨é‡Œçš„ /app ç›®å½•
  db:
    image: postgres:15-alpine
    container_name: acelogic_postgres
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
      POSTGRES_DB: acelogic_db
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data: